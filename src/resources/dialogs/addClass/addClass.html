<template>
  <ux-dialog class="dialog addClass">
    <ux-dialog-header class="bg-confetti-animated">
      ${model.params.isEdit ? "Edit class" : "Add class"}
      <span>
        <button class="button1 small" style="padding: 0 5px;" if.bind="isDev" click.delegate="fillDummyValues()">Prefill Fields</button>
      </span>
      <img src="../../../../static/close.svg" class="close-icon" click.trigger="controller.cancel()"/>
    </ux-dialog-header>
    <ux-dialog-body>
      <div class="body">
        <div class="add-class-container">

          <div class="info-section">
            <div class="label--question">
              <label>Class Name</label>
              <div class="question-mark">
                <question-mark text="The Ethereum address of the token used to purchase project tokens. Simply put: the token you are raising funds in (e.g. DAI)"></question-mark>
              </div>
            </div>
            <input id="className" value.bind="class.className"/>
          </div>

          <div class="info-section">
            <div class="label--question">
              <label>Project Token Purchase Limit</label>
              <div class="question-mark">
                <question-mark text="The Ethereum address of the token used to purchase project tokens. Simply put: the token you are raising funds in (e.g. DAI)"></question-mark>
              </div>
            </div>
            <numeric-input value.bind="class.projectTokenPurchaseLimit"></numeric-input>
          </div>

          <div class="info-section">
            <div class="label--question">
              <label>Vesting Set-up</label>
              <div class="question-mark">
                <question-mark text="The duration in days in which the Project token is vested. Vesting is released linearly by default. The vesting cliff is the period in which no tokens can be withdrawn or used â€” they are locked until this date"></question-mark>
              </div>
            </div>
            <div class="info-block">
              <div>
                <label class="label--small">Project tokens vested for</label>
                <div class="vesting-period">
                  <numeric-input
                    placeholder="100.2"
                    id="vestingPeriod"
                    not-wei
                    value.bind="class.vestingPeriod | secondsDays">
                  </numeric-input>
                  <div>days</div>
                </div>
              </div>
              <div>
                <label class="label--small">with a cliff of</label>
                <div class="vesting-period">
                  <numeric-input
                    placeholder="20.8"
                    id="vestingCliff"
                    not-wei
                    value.bind="class.vestingCliff | secondsDays">
                  </numeric-input>
                  <div>days</div>
                </div>
              </div>
            </div>
          </div>

          <div class="info-section">
            <div class="label--question">
              <label>Allowlist (Optional)</label>
              <div class="question-mark">
                <question-mark text="The Ethereum address of the token used to purchase project tokens. Simply put: the token you are raising funds in (e.g. DAI)"></question-mark>
              </div>
            </div>
            <input value.bind="class.allowList" />
          </div>

          <div class="info-section">
            <div class="label--question">
              <label>What Token Would You Like To Raise? (the "Funding Token")</label>
              <div class="question-mark">
                <question-mark text="The Ethereum address of the token used to purchase project tokens. Simply put: the token you are raising funds in (e.g. DAI)"></question-mark>
              </div>
            </div>
            <div class="tokenSelector">
              <token-select
                id="fundingTokenAddress"
                selected-token-address.bind="class.token.address"
                selected-token-info.bind="class.token"
                token-list.to-view="tokenList"
                item-changed.call="tokenChanged()">
              </token-select>
              <div if.to-view="class.token.address">
                <etherscanlink address.to-view="class.token.address"
                  text.to-view="class.token.address | smallHexString"></etherscanlink>
              </div>
            </div>
          </div>

          <div class="info-section">
            <label>Project Token Exchange Ratio</label>
            <div class="info-block">
              <div class="info-block__input">
                <numeric-input
                  output-as-string="true"
                  id="ppt"
                  value.bind="class.tokenExchangeRatio"
                  not-wei
                  placeholder="1.5">
                </numeric-input>
              </div>
              <div class="info-block__text">1 Funding Token <tokenlabel token-info.bind="launchConfig.launchDetails.fundingTokenInfo"></tokenlabel> = ${launchConfig.launchDetails.pricePerToken ? launchConfig.launchDetails.pricePerToken : '1.5'} Project Tokens <tokenlabel token-info.bind="launchConfig.tokenDetails.projectTokenInfo"></tokenlabel>
              </div>
            </div>
          </div>

          <div class="info-section">
            <label>Funding Tokens <tokenlabel token-info.bind="class.token"></tokenlabel> Target</label>
            <div class="info-section__text">
              The Funding Target is the minimum amount raised for the seed to be deemed successful. If the Funding Target is not reached by the end of the seed duration, the contributors have the option to retrieve their contribution
            </div>
            <numeric-input
              output-as-string="true"
              id="fundingTarget"
              value.bind="class.fundingTokensTarget"
              decimals.bind="class.token.decimals"
              placeholder="100">
            </numeric-input>
          </div>

          <div class="info-section">
            <div class="label--question">
              <label>Funding Tokens <tokenlabel token-info.bind="class.token"></tokenlabel> Maximum</label>
              <div class="question-mark">
                <question-mark text="Measured in funding tokens"></question-mark>
              </div>
            </div>
            <div class="info-section__text">
              The Funding Maximum is the maximum amount to be raised in the seed. Once the Funding Maximum is reached, the seed will automatically end and the vesting period, if there is one, will begin
            </div>
            <numeric-input
              output-as-string="true"
              id="fundingMax"
              value.bind="class.fundingTokenMaximum"
              decimals.bind="class.token.decimals"
              placeholder="1000">
            </numeric-input>
          </div>
        </div>
      </div>
    </ux-dialog-body>
    <ux-dialog-footer>
      <div class="button-container">
        <div class="delete-button" show.bind="model.params.isEdit">
          <div class="delete-button__text">delete</div>
          <img src="../../../../static/trash.svg" class="delete-button__icon" />
        </div>
        <button class="button1 small" ref="okButton" click.delegate="save()">Save</button>
      </div>
    </ux-dialog-footer>
  </ux-dialog>
</template>
